import{a as b,j as t,Q as j}from"./stories.settings-7040e2b8.js";import{R as A,r as C}from"./index-61bf1805.js";import{c as I}from"./dom.utils-26b7419a.js";import{h as B,a as T,I as q,b as S}from"./Icon-8947511e.js";import{B as P}from"./Button-7e94cffe.js";import"./_commonjsHelpers-de833af9.js";import"./settings-efbb2779.js";import"./log.utils-973a80c9.js";import"./layout.settings-4161ae17.js";import"./render.utils-17db905c.js";import"./Avatar-8aaaad62.js";import"./Spinner-658614bc.js";function W({file:a,acceptedFormat:i,maxSize:o,onDelete:e,formatErrorLabel:m,deleteAriaLabel:s,sizeErrorLabel:h}){const l=B(a,i),d=T(a,o),p=!l||!d;return b("li",{children:[t(q,{name:l&&d?"common-file-empty":"alert-triangle"}),t("span",{className:"m-upload__filename",children:a.name}),!l&&t("span",{className:"m-upload__error",children:m}),!d&&t("span",{className:"m-upload__error",children:h}),e&&t("div",{className:"m-upload__delete",children:t(P,{ariaLabel:s,addOn:{type:"icon",iconProps:{name:"remove"}},emphasis:"low",theme:p?"danger":"neutral",size:"small",onClick:()=>e(a)})})]},a.name)}function y({acceptedFormat:a,deleteAriaLabel:i,disabled:o,files:e,formatErrorLabel:m,id:s,label:h,maxSize:l,maxSizeLabel:d,multiple:p,onChange:c,onDelete:g,sizeErrorLabel:L,qa:N}){const x=A.useRef(null),E=r=>{g&&g(e==null?void 0:e.filter(n=>(n==null?void 0:n.name)!==r.name)),x.current&&(x.current.value="")},D=r=>{var n,_,v,V,M;if(p){const u=(n=r.target)!=null&&n.files?[...e,...Array.from(r.target.files)].filter((k,O,R)=>R.findIndex(U=>U.name===k.name)===O):[];c&&c(u,S(u,a,l))}else{const u=(v=(_=r.target)==null?void 0:_.files)!=null&&v[0]?[(M=(V=r.target)==null?void 0:V.files)==null?void 0:M[0]]:[];c&&c(u,S(u,a,l))}};return b("div",{className:I({"m-upload":!0,"is-disabled":!!o}),"data-qa":N,children:[t("div",{className:"m-upload__inner",children:b("div",{className:"m-upload__dropzone",children:[t("input",{ref:x,id:s,type:"file",multiple:p,onChange:D,accept:a,className:"m-upload__input",disabled:o,"aria-describedby":`${s}-description`}),t("div",{className:"m-upload__content",children:t("label",{htmlFor:s,className:"m-upload__message u-margin-bottom",children:h})})]})}),l&&b("small",{id:`${s}-description`,className:"m-upload__description",children:[d," ",l,"MB"]}),t("ul",{className:"m-upload__files",children:e==null?void 0:e.map(r=>t(W,{file:r,deleteAriaLabel:i,formatErrorLabel:m,sizeErrorLabel:L,onDelete:g&&E,maxSize:l,acceptedFormat:a},r==null?void 0:r.name))})]})}y.defaultProps={label:"Sleep een bestand hier of klik om te bladeren",maxSize:10,multiple:!0,disabled:!1,acceptedFormat:"*",files:[],maxSizeLabel:"Maximale bestandsgrootte:",formatErrorLabel:"Dit bestandsformaat is niet toegestaan.",sizeErrorLabel:"Maximale bestandsgrootte overschreden.",deleteAriaLabel:"Verwijder bestand"};y.displayName="Upload";const le={title:"React/Molecules/Upload",component:y,parameters:{docs:{description:{component:"Whenever a user needs to upload one or more files, always use our custom upload component."}}},args:{files:[],id:"aui-upload-stories",label:"Sleep een bestand hier of klik om te bladeren",multiple:!0,disabled:!1,acceptedFormat:"*",maxSize:1,maxSizeLabel:"Maximale bestandsgrootte:",formatErrorLabel:"Dit bestandsformaat is niet toegestaan.",sizeErrorLabel:"Maximale bestandsgrootte overschreden.",deleteAriaLabel:"Verwijder bestand"},argTypes:{files:{control:null,table:{type:{summary:"File[]"},defaultValue:{summary:"[]"}},description:"List of files displayed under the `Upload` component."},id:{control:{type:"text"},table:{type:{summary:"string"}},description:"ID on input element. Make sure it's unique across all `Upload` components."},label:{control:{type:"text"},description:"Override default text of upload zone. This can be rich text (ReactElement).",table:{type:{summary:"ReactElement | string"},defaultValue:{summary:"Sleep een bestand hier of klik om te bladeren"}}},multiple:{control:{type:"boolean"},description:"Sets `multiple` attribute on `input`.",table:{type:{summary:"boolean"},defaultValue:{summary:!0}}},disabled:{control:{type:"boolean"},description:"Disables the input.",table:{type:{summary:"boolean"},defaultValue:{summary:!1}}},acceptedFormat:{control:{type:"text"},description:"Allows to set accepted format. Should be MIME type or `.ext`, accepts wildcard when using MIME types, like `image/*`.",table:{type:{summary:"string"},defaultValue:{summary:"*"}}},maxSize:{control:{type:"number"},description:"Sets maximum allowed size for single file (in MB). 10MB by default.",table:{type:{summary:"number"},defaultValue:{summary:10}}},onChange:{control:{type:"function"},table:{type:{summary:"function"}},action:"onChange",description:"Handler for change of uploaded files. Fires on native file input user action. Will pass array of all unique files. When `multiple=false` it will return an array with a single file. The second argument is an array of validations for the current files (`{validSize: boolean, validFormat: boolean}[]`)."},onDelete:{control:{type:"function"},table:{type:{summary:"function"}},action:"onDelete",description:"Handler for the deletion of uploaded files. Will pass the filtered files in argument (without the deleted one)."},maxSizeLabel:{control:{type:"text"},description:"Override default text of the maximum size notice.",table:{type:{summary:"string"},defaultValue:{summary:"Maximale bestandsgrootte:"}}},formatErrorLabel:{control:{type:"text"},description:"Override default text of the format error notice.",table:{type:{summary:"string"},defaultValue:{summary:"Dit bestandsformaat is niet toegestaan."}}},sizeErrorLabel:{control:{type:"text"},description:"Override default text of the size error notice.",table:{type:{summary:"string"},defaultValue:{summary:"Maximale bestandsgrootte overschreden."}}},deleteAriaLabel:{control:{type:"text"},description:"Override the `aria-label` attribute on the file removal button.",table:{type:{summary:"string"},defaultValue:{summary:"Verwijder bestand"}}},qa:j}},H=a=>{const[i,o]=C.useState([]);return t(y,{...a,files:i,onChange:(e,m)=>{a.onChange(e,m),o(e)},onDelete:e=>{a.onDelete(e),o(e)}})},f=H.bind({});var w,z,F;f.parameters={...f.parameters,docs:{...(w=f.parameters)==null?void 0:w.docs,source:{originalSource:`args => {
  const [files, setFiles] = useState([]);
  return <Upload {...args} files={files} onChange={(f, v) => {
    args.onChange(f, v);
    setFiles(f);
  }} onDelete={f => {
    args.onDelete(f);
    setFiles(f);
  }} />;
}`,...(F=(z=f.parameters)==null?void 0:z.docs)==null?void 0:F.source}}};const oe=["upload"];export{oe as __namedExportsOrder,le as default,f as upload};
//# sourceMappingURL=Upload.stories-3521a787.js.map
