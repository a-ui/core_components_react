{"version":3,"file":"RangeSlider.stories-20223896.js","sources":["../../../../packages/antwerp-ui/react-components/src/lib/atoms/range-slider/RangeSliderBar.tsx","../../../../packages/antwerp-ui/react-components/src/lib/atoms/range-slider/RangeSliderHandle.tsx","../../../../packages/antwerp-ui/react-components/src/lib/atoms/range-slider/RangeSlider.tsx"],"sourcesContent":["import { RangeSliderBarProps } from './RangeSlider.types';\n\nexport function RangeSliderBar({ start, end, range, min, getPositionFromValue }: RangeSliderBarProps) {\n  return (\n    <div\n      className=\"a-range-slider__bar\"\n      style={{\n        left: range ? getPositionFromValue(start) + 'px' : '',\n        width: range && end ? getPositionFromValue(end + min - start) + 'px' : getPositionFromValue(start) + 'px'\n      }}\n    ></div>\n  );\n}\n\nexport default RangeSliderBar;\n","import { getPositionValue } from '../../../utils/math.utils';\nimport React from 'react';\nimport { RangeSliderHandleProps } from './RangeSlider.types';\n\nexport function RangeSliderHandle({\n  value,\n  min,\n  max,\n  sliderMin,\n  sliderMax,\n  step,\n  direction,\n  sliderPos,\n  onUpdate,\n  getPositionFromValue,\n  ariaLabel\n}: RangeSliderHandleProps) {\n  const [limit, setLimit] = React.useState(0);\n  const handleRef = React.useRef(null);\n\n  React.useEffect(() => {\n    if (sliderPos) {\n      setLimit(sliderPos);\n    }\n  }, [direction, sliderPos]);\n\n  const handleNoop = (e: MouseEvent | React.TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  const handleStart = () => {\n    document.addEventListener('mousemove', handleDrag);\n    document.addEventListener('mouseup', handleEnd);\n  };\n\n  const handleDrag = (e: MouseEvent | React.TouchEvent) => {\n    e.type === 'mousemove' ? handleNoop(e) : e.stopPropagation();\n    const value = position(e);\n    return onUpdate && onUpdate(value);\n  };\n\n  const handleEnd = (e: MouseEvent | React.TouchEvent) => {\n    document.removeEventListener('mousemove', handleDrag);\n    document.removeEventListener('mouseup', handleEnd);\n    const value = position(e);\n    return onUpdate && onUpdate(value);\n  };\n\n  const position = (e: MouseEvent | React.TouchEvent) => {\n    return getPositionValue(e, limit, step, min, max, sliderMin, sliderMax, direction);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    let newValue = value;\n    if (e.key === 'ArrowUp' || e.key === 'ArrowRight') {\n      e.preventDefault();\n      newValue += step;\n    } else if (e.key === 'ArrowDown' || e.key === 'ArrowLeft') {\n      e.preventDefault();\n      newValue -= step;\n    } else if (e.key === 'End') {\n      e.preventDefault();\n      newValue = max;\n    } else if (e.key === 'Home') {\n      e.preventDefault();\n      newValue = min;\n    }\n    if (newValue >= min && newValue <= max) {\n      onUpdate(newValue);\n    }\n  };\n  return (\n    <div\n      className=\"a-range-slider__handle\"\n      tabIndex={0}\n      style={{\n        left: getPositionFromValue(value) + `px`\n      }}\n      onMouseDown={handleStart}\n      onTouchEnd={handleNoop}\n      onTouchMove={handleDrag}\n      onKeyDown={handleKeyPress}\n      role=\"slider\"\n      aria-orientation=\"horizontal\"\n      aria-valuemax={max}\n      aria-valuemin={min}\n      aria-valuenow={value}\n      aria-label={ariaLabel}\n      ref={handleRef}\n    ></div>\n  );\n}\n\nexport default RangeSliderHandle;\n","import React, { MouseEvent } from 'react';\nimport { getPositionValue, getSteps, lineValuesToPosition } from '../../../utils/math.utils';\nimport { Icon } from '../../base/icon';\nimport { RangeSliderProps } from './RangeSlider.types';\nimport { RangeSliderBar } from './RangeSliderBar';\nimport { RangeSliderHandle } from './RangeSliderHandle';\n\nexport function RangeSlider({\n  label,\n  start = RangeSlider.defaultProps.start,\n  end,\n  min = RangeSlider.defaultProps.min,\n  max = RangeSlider.defaultProps.max,\n  step = RangeSlider.defaultProps.step,\n  unit = RangeSlider.defaultProps.unit,\n  minRange = RangeSlider.defaultProps.minRange,\n  range = RangeSlider.defaultProps.range,\n  labelStart,\n  labelEnd,\n  iconStart,\n  iconEnd,\n  ariaLabelMin,\n  ariaLabelMax,\n  tickMarks,\n  qa,\n  onChange\n}: RangeSliderProps) {\n  const [limit, setLimit] = React.useState(0);\n  const [sliderPos, setSliderPos] = React.useState(0);\n  const [direction, setDirection] = React.useState(0);\n  const sliderRef = React.useRef(null);\n\n  React.useEffect(() => {\n    window.addEventListener('resize', handleResize);\n    handleResize();\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const handleResize = () => {\n    if (sliderRef.current) {\n      const sliderPosition = sliderRef.current['offsetWidth'];\n      const node = sliderRef.current as HTMLElement;\n      if (node && node instanceof HTMLElement) {\n        const dir = node.getBoundingClientRect().left;\n        setDirection(dir);\n      }\n      setLimit(sliderPosition);\n      setSliderPos(sliderPosition);\n    }\n  };\n\n  const handleUpdateStart = (s: number) => {\n    if (range && end && minRange && end - s < minRange) return;\n    return onChange && onChange(s, range ? end : undefined);\n  };\n\n  const handleUpdateEnd = (e: number) => {\n    if (start && minRange && e - start < minRange) return;\n    return onChange && onChange(start, e);\n  };\n\n  const getPositionFromValue = (value: number) => lineValuesToPosition(value, min, max, limit);\n\n  const position = (e: MouseEvent | React.TouchEvent) => {\n    return getPositionValue(e, limit, step, min, max, min, max, direction);\n  };\n\n  const updateHandleValue = (e: MouseEvent) => {\n    const newPosition = position(e);\n    if (range && end && Math.abs(newPosition - end) < Math.abs(newPosition - start)) {\n      handleUpdateEnd(newPosition);\n      return;\n    }\n    handleUpdateStart(newPosition);\n  };\n\n  return (\n    <div className=\"a-range-slider\" data-qa={qa} ref={sliderRef}>\n      <div className=\"a-range-slider__labels\">\n        <div className=\"a-range-slider__label\">{label}</div>\n        <div className=\"a-range-slider__label\">\n          {range ? `${start} - ${end}` : `${start}`}\n          {` ${unit}`}\n        </div>\n      </div>\n      <div className=\"a-range-slider__inner\" onClick={updateHandleValue}>\n        {tickMarks && (\n          <div className=\"a-range-slider__tickmarks\">\n            {getSteps(min, max, step).map((st) => (\n              <div key={st} className=\"a-range-slider__tickmark\"></div>\n            ))}\n          </div>\n        )}\n        <RangeSliderBar start={start} end={end} getPositionFromValue={getPositionFromValue} range={!!range} min={min} />\n        <RangeSliderHandle\n          value={start}\n          onUpdate={handleUpdateStart}\n          min={min}\n          max={range && minRange ? max - minRange : max}\n          sliderMin={min}\n          sliderMax={max}\n          step={step}\n          sliderPos={sliderPos}\n          direction={direction}\n          getPositionFromValue={getPositionFromValue}\n          ariaLabel={ariaLabelMin}\n        />\n        {range && typeof minRange === 'number' && typeof end === 'number' && (\n          <RangeSliderHandle\n            value={end}\n            onUpdate={handleUpdateEnd}\n            min={min + minRange}\n            max={max}\n            sliderMin={min}\n            sliderMax={max}\n            step={step}\n            sliderPos={sliderPos}\n            direction={direction}\n            getPositionFromValue={getPositionFromValue}\n            ariaLabel={ariaLabelMax}\n          />\n        )}\n      </div>\n      <div className=\"a-range-slider__descriptions\">\n        <div className=\"a-range-slider__description small\">\n          {labelStart}\n          {iconStart ? <Icon name={iconStart} /> : null}\n        </div>\n        <div className=\"a-range-slider__description small\">\n          {labelEnd}\n          {iconEnd ? <Icon name={iconEnd} /> : null}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nRangeSlider.defaultProps = {\n  start: 0,\n  min: 0,\n  max: 10,\n  step: 1,\n  unit: '',\n  minRange: 1,\n  range: false,\n  ariaLabelMin: 'Minimum',\n  ariaLabelMax: 'Maximimum'\n};\n\nexport default RangeSlider;\n"],"names":["RangeSliderBar","start","end","range","min","getPositionFromValue","jsx","RangeSliderHandle","value","max","sliderMin","sliderMax","step","direction","sliderPos","onUpdate","ariaLabel","limit","setLimit","React","handleRef","handleNoop","handleStart","handleDrag","handleEnd","position","getPositionValue","handleKeyPress","newValue","RangeSlider","label","unit","minRange","labelStart","labelEnd","iconStart","iconEnd","ariaLabelMin","ariaLabelMax","tickMarks","qa","onChange","setSliderPos","setDirection","sliderRef","handleResize","sliderPosition","node","dir","handleUpdateStart","handleUpdateEnd","e","lineValuesToPosition","updateHandleValue","newPosition","jsxs","getSteps","st","Icon"],"mappings":"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"}