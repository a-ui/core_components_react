{"version":3,"file":"Icon-859096df.js","sources":["../../../../packages/antwerp-ui/react-components/src/utils/file.utils.ts","../../../../packages/antwerp-ui/react-components/src/lib/base/icon/Icon.tsx"],"sourcesContent":["import { logWarning } from './log.utils';\n\nconst MB = 1048576;\n\nexport function hasValidFormat(file: File, acceptedFormat?: string): boolean {\n  return (\n    !acceptedFormat ||\n    acceptedFormat === '*' ||\n    acceptedFormat === file.type ||\n    (acceptedFormat?.includes('*') &&\n      !!acceptedFormat?.split('/')?.[0] &&\n      file.type.startsWith(acceptedFormat?.split('/')?.[0]))\n  );\n}\n\nexport function hasValidSize(file: File, maxSize?: number): boolean {\n  return !maxSize || file.size <= maxSize * MB;\n}\n\nexport function areFilesValid(\n  files: File[],\n  acceptedFormat?: string,\n  maxSize?: number\n): { validSize: boolean; validFormat: boolean }[] {\n  return files.map((f) => ({ validFormat: hasValidFormat(f, acceptedFormat), validSize: hasValidSize(f, maxSize) }));\n}\n\nexport function invalidIcon(icon: SVGGraphicsElement): boolean {\n  const { width, height } = icon.getBBox();\n  return width === 0 && height === 0;\n}\n","import { IconProps } from './Icon.types';\nimport { ICONS_URL, SCREEN_READER_CLASS } from '../../../constants/settings';\nimport { classNames } from '../../../utils/dom.utils';\nimport { invalidIcon } from '../../../utils/file.utils';\nimport { logWarning } from '../../../utils/log.utils';\nimport { ForwardedRef, forwardRef } from 'react';\n\nconst ICONS_SVG_HTML_ID = 'ai-svg';\n\nexport const Icon = forwardRef(function Icon(\n  { name, tabIndex, onKeyDown, className, role, onClick, screenReaderText, thin, qa }: IconProps,\n  iconRef: ForwardedRef<HTMLSpanElement>\n) {\n  const fetchIcons = async function () {\n    if (!fetch) return null;\n    const response = await fetch(ICONS_URL);\n    const svgText = await response.text();\n    const svgWrapper = document.createElement('svg');\n    svgWrapper.id = ICONS_SVG_HTML_ID;\n    svgWrapper.innerHTML = svgText;\n    if (!document.getElementById(ICONS_SVG_HTML_ID)) {\n      document.body.appendChild(svgWrapper);\n    }\n    queryIcons()?.forEach((icon) => {\n      if (invalidIcon(icon)) {\n        logWarning(\n          `The provided icon with name \"${name}\" does not seem to exist. Please make sure the 'name' is correct`\n        );\n      }\n    });\n  };\n\n  const queryIcons = () => {\n    return Array.from(document.querySelectorAll(`.ai-${name.replace('ai-', '')} use`)) as SVGGraphicsElement[];\n  };\n\n  if (typeof document !== 'undefined' && !document.getElementById(ICONS_SVG_HTML_ID)) {\n    fetchIcons();\n  }\n\n  const classes = classNames({\n    ai: true,\n    [`ai-${name?.replace('ai-', '')}`]: !!name,\n    'ai--thin': !!thin,\n    [className || '']: !!className\n  });\n\n  return (\n    <span\n      ref={iconRef}\n      onKeyDown={onKeyDown}\n      tabIndex={tabIndex}\n      role={role}\n      onClick={onClick}\n      className={classes}\n      data-qa={qa}\n    >\n      {name ? (\n        <svg aria-hidden=\"true\">\n          <use href={`#ai-${name.replace('ai-', '')}`} />\n        </svg>\n      ) : null}\n      {!!screenReaderText && <span className={SCREEN_READER_CLASS}>{screenReaderText}</span>}\n    </span>\n  );\n});\n"],"names":["MB","hasValidFormat","file","acceptedFormat","_a","_b","__name","hasValidSize","maxSize","areFilesValid","files","f","invalidIcon","icon","width","height","ICONS_SVG_HTML_ID","Icon","forwardRef","name","tabIndex","onKeyDown","className","role","onClick","screenReaderText","thin","qa","iconRef","fetchIcons","fetch","svgText","ICONS_URL","text","svgWrapper","document","createElement","id","innerHTML","getElementById","body","appendChild","queryIcons","forEach","logWarning","Array","from","querySelectorAll","replace","classes","classNames","ai","_jsx","SCREEN_READER_CLASS"],"mappings":"sTAEA,MAAMA,EAAK,QAEK,SAAAC,EAAeC,EAAYC,EAAkC,SAEzE,MAAA,CAACA,GACDA,IAAmB,KACnBA,IAAmBD,EAAK,OACvBC,GAAA,YAAAA,EAAgB,SAAS,OACxB,CAAC,GAACC,EAAAD,GAAA,YAAAA,EAAgB,MAAM,OAAtB,MAAAC,EAA6B,KAC/BF,EAAK,KAAK,YAAWG,EAAAF,GAAA,YAAAA,EAAgB,MAAM,OAAtB,YAAAE,EAA6B,EAAE,CAE1D,CATgBC,EAAAL,EAAA,kBAWA,SAAAM,EAAaL,EAAYM,EAA2B,CAClE,MAAO,CAACA,GAAWN,EAAK,MAAQM,EAAUR,CAC5C,CAFgBM,EAAAC,EAAA,gBAIA,SAAAE,EACdC,EACAP,EACAK,EACgD,CAChD,OAAOE,EAAM,IAAKC,IAAO,CAAE,YAAaV,EAAeU,EAAGR,CAAc,EAAG,UAAWI,EAAaI,EAAGH,CAAO,CAAI,EAAA,CACnH,CANgBF,EAAAG,EAAA,iBAQT,SAASG,EAAYC,EAAmC,CAC7D,KAAM,CAAE,MAAAC,EAAO,OAAAC,CAAO,EAAIF,EAAK,QAAQ,EAChC,OAAAC,IAAU,GAAKC,IAAW,CACnC,CAHgBT,EAAAM,EAAA,eCpBhB,MAAMI,EAAoB,SAEbC,EAAOC,EAAAA,QAAAA,WAAWZ,EAAA,SAC7B,CAAEa,KAAAA,EAAMC,SAAAA,EAAUC,UAAAA,EAAWC,UAAAA,EAAWC,KAAAA,EAAMC,QAAAA,EAASC,iBAAAA,EAAkBC,KAAAA,EAAMC,GAAAA,CAAc,EAC7FC,EACA,CACA,MAAMC,EAAavB,EAAA,gBAAkB,OACnC,GAAI,CAACwB,MAAc,OAAA,KAEbC,MAAAA,EAAU,MADC,MAAMD,MAAME,CAAS,GACPC,OACzBC,EAAaC,SAASC,cAAc,KAAK,EAC/CF,EAAWG,GAAKrB,EAChBkB,EAAWI,UAAYP,EAClBI,SAASI,eAAevB,CAAiB,GACnCwB,SAAAA,KAAKC,YAAYP,CAAU,GAE1B9B,EAAAsC,EAAA,IAAA,MAAAtC,EAAEuC,QAAkB9B,GAAA,CAC1BD,EAAYC,CAAI,GAClB+B,EACG,gCAA+BzB,mEAAsE,CAE1G,EACD,EAhBgB,cAmBbuB,EAAapC,EAAA,IACVuC,MAAMC,KAAKX,SAASY,iBAAkB,OAAM5B,EAAK6B,QAAQ,MAAO,EAAE,OAAO,CAAC,EADhE,cAIf,OAAOb,SAAa,KAAe,CAACA,SAASI,eAAevB,CAAiB,GACnEa,IAGd,MAAMoB,EAAUC,EAAW,CACzBC,GAAI,GACJ,CAAE,MAAKhC,GAAAA,YAAAA,EAAM6B,QAAQ,MAAO,OAAQ,CAAC,CAAC7B,EACtC,WAAY,CAAC,CAACO,EACd,CAACJ,GAAa,IAAK,CAAC,CAACA,CAAAA,CACtB,EAED,SACE,OAAA,CACE,IAAKM,EACL,UAAAP,EACA,SAAAD,EACA,KAAAG,EACA,QAAAC,EACA,UAAWyB,EACX,UAAStB,EAAG,SAAA,CAEXR,EACCiC,EAAA,MAAA,CAAK,cAAY,OAAM,WACrB,MAAA,CAAK,KAAO,OAAMjC,EAAK6B,QAAQ,MAAO,EAAE,GAAA,CAAI,CAAG,CAAA,EAE/C,KACH,CAAC,CAACvB,KAAoB,OAAA,CAAM,UAAW4B,EAAoB,SAAE5B,CAAAA,CAAwB,CAAA,CAAA,CACjF,CAEX,EAxD+B,QAwD9B"}