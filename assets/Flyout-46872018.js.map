{"version":3,"file":"Flyout-46872018.js","sources":["../../../../packages/antwerp-ui/react-components/src/lib/molecules/flyout/Flyout.tsx"],"sourcesContent":["import React, { cloneElement, ForwardedRef, forwardRef, useImperativeHandle } from 'react';\nimport ReactDOM from 'react-dom';\nimport { DEFAULT_SIZE, SIZE_MAP } from '../../../constants/layout.settings';\nimport { classNames } from '../../../utils/dom.utils';\nimport { FlyoutProps } from './Flyout.types';\n\nexport const Flyout = forwardRef(function Flyout(\n  {\n    trigger,\n    open,\n    hasPadding,\n    className = '',\n    orientation,\n    size,\n    children,\n    scrollable,\n    onStateChange,\n    qa\n  }: FlyoutProps,\n  forwardRef: ForwardedRef<null>\n) {\n  const [isOpen, setIsOpen] = React.useState(!!open);\n  const showFlyout = open === false || open === true ? open : isOpen;\n\n  const flyoutRef = React.useRef(null);\n  useImperativeHandle(forwardRef, () => flyoutRef.current);\n\n  const _handleOutsideClick = React.useCallback(\n    (e: MouseEvent) => {\n      const area = ReactDOM.findDOMNode(flyoutRef.current);\n      if (area && !area.contains(e.target as HTMLInputElement)) {\n        setIsOpen(false);\n        onStateChange && onStateChange(false);\n      }\n    },\n    [onStateChange]\n  );\n\n  const initEventHandlers = React.useCallback(() => {\n    if (showFlyout) {\n      document.addEventListener('click', _handleOutsideClick, false);\n    } else {\n      document.removeEventListener('click', _handleOutsideClick, false);\n    }\n  }, [_handleOutsideClick, showFlyout]);\n\n  const _toggleIsOpen = () => {\n    setIsOpen(!showFlyout);\n    initEventHandlers();\n    onStateChange && onStateChange(!showFlyout);\n  };\n\n  React.useEffect(() => {\n    initEventHandlers();\n  }, [initEventHandlers]);\n\n  const flyoutClasses = classNames({\n    'm-flyout': true,\n    [className]: !!className,\n    'is-open': !!showFlyout,\n    'u-text-right': !!orientation?.includes('right'),\n    [`m-flyout--${orientation}`]: !!orientation,\n    [`m-flyout--${SIZE_MAP[size || DEFAULT_SIZE]}`]: !!size,\n    'm-flyout--scrollable': !!scrollable\n  });\n\n  const flyoutContentClasses = classNames({\n    'm-flyout__content': true,\n    'has-padding': !!hasPadding\n  });\n\n  return trigger ? (\n    <div className={flyoutClasses} ref={flyoutRef} data-qa={qa}>\n      {cloneElement(trigger, { onClick: _toggleIsOpen, 'aria-haspopup': true, 'aria-expanded': showFlyout })}\n      <div className={flyoutContentClasses} {...(scrollable ? { tabIndex: 0 } : {})}>\n        {children}\n      </div>\n    </div>\n  ) : null;\n});\n\nFlyout.defaultProps = {\n  hasPadding: true,\n  scrollable: false,\n  orientation: 'bottom-left'\n};\n\nexport default Flyout;\n"],"names":["Flyout","forwardRef","trigger","open","hasPadding","className","orientation","size","children","scrollable","onStateChange","qa","isOpen","setIsOpen","React","showFlyout","flyoutRef","_handleOutsideClick","e","area","ReactDOM","initEventHandlers","_toggleIsOpen","flyoutClasses","classNames","SIZE_MAP","DEFAULT_SIZE","flyoutContentClasses","cloneElement","jsx"],"mappings":"sPAMa,MAAAA,EAASC,EAAAA,WAAW,SAC/B,CACE,QAAAC,EACA,KAAAC,EACA,WAAAC,EACA,UAAAC,EAAY,GACZ,YAAAC,EACA,KAAAC,EACA,SAAAC,EACA,WAAAC,EACA,cAAAC,EACA,GAAAC,CACF,EACAV,EACA,CACM,KAAA,CAACW,EAAQC,CAAS,EAAIC,EAAM,SAAS,CAAC,CAACX,CAAI,EAC3CY,EAAaZ,IAAS,IAASA,IAAS,GAAOA,EAAOS,EAEtDI,EAAYF,EAAM,OAAO,IAAI,EACfb,EAAAA,oBAAAA,EAAY,IAAMe,EAAU,OAAO,EAEvD,MAAMC,EAAsBH,EAAM,YAC/BI,GAAkB,CACjB,MAAMC,EAAOC,EAAS,YAAYJ,EAAU,OAAO,EAC/CG,GAAQ,CAACA,EAAK,SAASD,EAAE,MAA0B,IACrDL,EAAU,EAAK,EACfH,GAAiBA,EAAc,EAAK,EAExC,EACA,CAACA,CAAa,CAAA,EAGVW,EAAoBP,EAAM,YAAY,IAAM,CAC5CC,EACO,SAAA,iBAAiB,QAASE,EAAqB,EAAK,EAEpD,SAAA,oBAAoB,QAASA,EAAqB,EAAK,CAClE,EACC,CAACA,EAAqBF,CAAU,CAAC,EAE9BO,EAAgB,IAAM,CAC1BT,EAAU,CAACE,CAAU,EACHM,IACDX,GAAAA,EAAc,CAACK,CAAU,CAAA,EAG5CD,EAAM,UAAU,IAAM,CACFO,GAAA,EACjB,CAACA,CAAiB,CAAC,EAEtB,MAAME,EAAgBC,EAAW,CAC/B,WAAY,GACZ,CAACnB,CAAS,EAAG,CAAC,CAACA,EACf,UAAW,CAAC,CAACU,EACb,eAAgB,CAAC,EAACT,GAAA,MAAAA,EAAa,SAAS,UACxC,CAAC,aAAaA,CAAW,EAAE,EAAG,CAAC,CAACA,EAChC,CAAC,aAAamB,EAASlB,GAAQmB,CAAY,CAAC,EAAE,EAAG,CAAC,CAACnB,EACnD,uBAAwB,CAAC,CAACE,CAAA,CAC3B,EAEKkB,EAAuBH,EAAW,CACtC,oBAAqB,GACrB,cAAe,CAAC,CAACpB,CAAA,CAClB,EAEM,OAAAF,IACJ,MAAI,CAAA,UAAWqB,EAAe,IAAKP,EAAW,UAASL,EACrD,SAAA,CAAaiB,eAAA1B,EAAS,CAAE,QAASoB,EAAe,gBAAiB,GAAM,gBAAiBP,EAAY,EACpGc,EAAA,MAAA,CAAI,UAAWF,EAAuB,GAAIlB,EAAa,CAAE,SAAU,CAAE,EAAI,CAAC,EACxE,SAAAD,CACH,CAAA,CAAA,CACF,CAAA,EACE,IACN,CAAC,EAEDR,EAAO,aAAe,CACpB,WAAY,GACZ,WAAY,GACZ,YAAa,aACf"}