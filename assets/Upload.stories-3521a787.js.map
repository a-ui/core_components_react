{"version":3,"file":"Upload.stories-3521a787.js","sources":["../../../../packages/antwerp-ui/react-components/src/lib/molecules/upload/UploadFile.tsx","../../../../packages/antwerp-ui/react-components/src/lib/molecules/upload/Upload.tsx"],"sourcesContent":["import { hasValidFormat, hasValidSize } from '../../../utils/file.utils';\nimport { Button } from '../../atoms/button';\nimport { Icon } from '../../base/icon';\nimport { UploadFileProps } from './Upload.types';\n\nexport function UploadFile({\n  file,\n  acceptedFormat,\n  maxSize,\n  onDelete,\n  formatErrorLabel,\n  deleteAriaLabel,\n  sizeErrorLabel,\n}: UploadFileProps) {\n  const isValidFormat = hasValidFormat(file, acceptedFormat);\n  const isValidSize = hasValidSize(file, maxSize);\n  const error = !isValidFormat || !isValidSize;\n  return (\n    <li key={file.name}>\n      <Icon name={isValidFormat && isValidSize ? 'common-file-empty' : 'alert-triangle'} />\n      <span className=\"m-upload__filename\">{file.name}</span>\n      {!isValidFormat && <span className=\"m-upload__error\">{formatErrorLabel}</span>}\n      {!isValidSize && <span className=\"m-upload__error\">{sizeErrorLabel}</span>}\n      {onDelete && (\n        <div className=\"m-upload__delete\">\n          <Button\n            ariaLabel={deleteAriaLabel}\n            addOn={{ type: 'icon', iconProps: { name: 'remove' } }}\n            emphasis=\"low\"\n            theme={error ? 'danger' : 'neutral'}\n            size=\"small\"\n            onClick={() => onDelete(file)}\n          />\n        </div>\n      )}\n    </li>\n  );\n}\n\nexport default UploadFile;\n","import React, { ChangeEvent } from 'react';\nimport { classNames } from '../../../utils/dom.utils';\nimport { areFilesValid } from '../../../utils/file.utils';\nimport { UploadProps } from './Upload.types';\nimport { UploadFile } from './UploadFile';\n\nexport function Upload({\n  acceptedFormat,\n  deleteAriaLabel,\n  disabled,\n  files,\n  formatErrorLabel,\n  id,\n  label,\n  maxSize,\n  maxSizeLabel,\n  multiple,\n  onChange,\n  onDelete,\n  sizeErrorLabel,\n  qa\n}: UploadProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const handleDelete = (file: File) => {\n    onDelete && onDelete(files?.filter((f) => f?.name !== file.name));\n    if (inputRef.current) {\n      inputRef.current.value = '';\n    }\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (multiple) {\n      const newFiles = e.target?.files\n        ? [...files, ...Array.from(e.target.files)].filter(\n            (file, index, self) => self.findIndex((f) => f.name === file.name) === index\n          )\n        : [];\n      onChange && onChange(newFiles, areFilesValid(newFiles, acceptedFormat, maxSize));\n    } else {\n      const newFile = e.target?.files?.[0] ? [e.target?.files?.[0]] : [];\n      onChange && onChange(newFile, areFilesValid(newFile, acceptedFormat, maxSize));\n    }\n  };\n\n  return (\n    <div className={classNames({ 'm-upload': true, 'is-disabled': !!disabled })} data-qa={qa}>\n      <div className=\"m-upload__inner\">\n        <div className=\"m-upload__dropzone\">\n          <input\n            ref={inputRef}\n            id={id}\n            type=\"file\"\n            multiple={multiple}\n            onChange={handleChange}\n            accept={acceptedFormat}\n            className=\"m-upload__input\"\n            disabled={disabled}\n            aria-describedby={`${id}-description`}\n          />\n          <div className=\"m-upload__content\">\n            <label htmlFor={id} className=\"m-upload__message u-margin-bottom\">\n              {label}\n            </label>\n          </div>\n        </div>\n      </div>\n      {maxSize && (\n        <small id={`${id}-description`} className=\"m-upload__description\">\n          {maxSizeLabel} {maxSize}MB\n        </small>\n      )}\n      <ul className=\"m-upload__files\">\n        {files?.map((f) => (\n          <UploadFile\n            file={f}\n            deleteAriaLabel={deleteAriaLabel}\n            formatErrorLabel={formatErrorLabel}\n            sizeErrorLabel={sizeErrorLabel}\n            key={f?.name}\n            onDelete={onDelete && handleDelete}\n            maxSize={maxSize}\n            acceptedFormat={acceptedFormat}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nUpload.defaultProps = {\n  label: 'Sleep een bestand hier of klik om te bladeren',\n  maxSize: 10,\n  multiple: true,\n  disabled: false,\n  acceptedFormat: '*',\n  files: [],\n  maxSizeLabel: 'Maximale bestandsgrootte:',\n  formatErrorLabel: 'Dit bestandsformaat is niet toegestaan.',\n  sizeErrorLabel: 'Maximale bestandsgrootte overschreden.',\n  deleteAriaLabel: 'Verwijder bestand'\n};\n\nexport default Upload;\n"],"names":["UploadFile","file","acceptedFormat","maxSize","onDelete","formatErrorLabel","deleteAriaLabel","sizeErrorLabel","isValidFormat","hasValidFormat","isValidSize","hasValidSize","error","jsx","Icon","Button","Upload","disabled","files","id","label","maxSizeLabel","multiple","onChange","qa","inputRef","React","handleDelete","f","handleChange","e","newFiles","_a","index","self","areFilesValid","newFile","_c","_b","_e","_d","jsxs","classNames"],"mappings":"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"}