{"version":3,"file":"PageIndicator.stories-2401543d.js","sources":["../../../../packages/antwerp-ui/react-components/src/lib/molecules/page-indicator/PageIndicator.tsx"],"sourcesContent":["import React, { KeyboardEvent } from 'react';\nimport { classNames } from '../../../utils/dom.utils';\nimport { PageIndicatorProps } from './PageIndicator.types';\nimport { DEFAULT_SIZE, SIZE_MAP } from '../../../constants/layout.settings';\n\n// Keyboard and Tab handling according to ARIA spec\n// https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tab_role\n\nexport function PageIndicator({ qa, size, pages, activePage, onPageChange }: PageIndicatorProps) {\n  const [focusedIndex, setFocusedIndex] = React.useState(0);\n\n  const handleFocus = (index: number) => setFocusedIndex(index);\n\n  const clickHandler = (pageId: string) => () => onPageChange && onPageChange(pageId);\n\n  const handleArrowNavigation = (e: KeyboardEvent<HTMLDivElement>) => {\n    const isLeft = e.key === 'ArrowLeft';\n    const isRight = e.key === 'ArrowRight';\n    if (isLeft || isRight) {\n      document.getElementById(activePage)?.setAttribute('tabindex', '-1');\n      let newFocusedIndex = focusedIndex;\n      if (isRight) {\n        newFocusedIndex = focusedIndex + 1 >= pages.length ? 0 : focusedIndex + 1;\n        setFocusedIndex(newFocusedIndex);\n      }\n      if (isLeft) {\n        newFocusedIndex = focusedIndex - 1 < 0 ? pages.length - 1 : focusedIndex - 1;\n        setFocusedIndex(newFocusedIndex);\n      }\n      const nextElementToFocusId = pages[newFocusedIndex].id;\n      if (nextElementToFocusId) {\n        const elToFocus = document.getElementById(nextElementToFocusId);\n        elToFocus?.setAttribute('tabindex', '0');\n        pages\n          .filter((p) => p.id !== nextElementToFocusId)\n          .forEach((p) => {\n            document.getElementById(p.id)?.setAttribute('tabindex', '-1');\n          });\n        elToFocus?.focus();\n      }\n    }\n  };\n\n  const classes = classNames({\n    'a-page-indicator': true,\n    [`a-page-indicator--${SIZE_MAP[size || DEFAULT_SIZE]}`]: !!size\n  });\n\n  return (\n    <div className={classes} data-qa={qa} onKeyDown={handleArrowNavigation}>\n      {pages?.map((page, index) => {\n        const isActive = !!activePage && activePage === page.id;\n        const classes = classNames({\n          'a-page-indicator__item': true,\n          'is-active': isActive\n        });\n        return (\n          <button\n            key={page.id}\n            id={page.id}\n            role=\"tab\"\n            className={classes}\n            aria-label={page.ariaLabel}\n            aria-selected={isActive ? 'true' : 'false'}\n            aria-controls={page.ariaControls}\n            tabIndex={isActive ? 0 : -1}\n            onClick={clickHandler(page.id)}\n            onFocus={() => handleFocus(index)}\n          ></button>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default PageIndicator;\n"],"names":["PageIndicator","qa","size","pages","activePage","onPageChange","focusedIndex","setFocusedIndex","React","useState","handleFocus","__name","index","clickHandler","pageId","handleArrowNavigation","e","isLeft","key","isRight","document","getElementById","setAttribute","newFocusedIndex","length","nextElementToFocusId","id","elToFocus","filter","p","forEach","focus","classes","classNames","SIZE_MAP","DEFAULT_SIZE","map","page","isActive","ariaLabel","ariaControls"],"mappings":"kYAQO,SAASA,EAAc,CAAEC,GAAAA,EAAIC,KAAAA,EAAMC,MAAAA,EAAOC,WAAAA,EAAYC,aAAAA,CAAiC,EAAG,CAC/F,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAAMC,SAAS,CAAC,EAElDC,EAAcC,EAACC,GAAkBL,EAAgBK,CAAK,EAAxC,eAEdC,EAAeF,EAACG,GAAmB,IAAMT,GAAgBA,EAAaS,CAAM,EAA7D,gBAEfC,EAAwBJ,EAACK,GAAqC,OAC5DC,MAAAA,EAASD,EAAEE,MAAQ,YACnBC,EAAUH,EAAEE,MAAQ,aAC1B,GAAID,GAAUE,EAAS,EACrBC,EAAAA,SAASC,eAAejB,CAAU,IAAlCgB,MAAAA,EAAqCE,aAAa,WAAY,MAC9D,IAAIC,EAAkBjB,EAClBa,IACFI,EAAkBjB,EAAe,GAAKH,EAAMqB,OAAS,EAAIlB,EAAe,EACxEC,EAAgBgB,CAAe,GAE7BN,IACFM,EAAkBjB,EAAe,EAAI,EAAIH,EAAMqB,OAAS,EAAIlB,EAAe,EAC3EC,EAAgBgB,CAAe,GAE3BE,MAAAA,EAAuBtB,EAAMoB,GAAiBG,GACpD,GAAID,EAAsB,CAClBE,MAAAA,EAAYP,SAASC,eAAeI,CAAoB,EACnDH,GAAAA,MAAAA,EAAAA,aAAa,WAAY,KACpCnB,EACGyB,OAAcC,GAAAA,EAAEH,KAAOD,CAAoB,EAC3CK,QAAeD,GAAA,QACdT,EAAAA,SAASC,eAAeQ,EAAEH,EAAE,IAA5BN,MAAAA,EAA+BE,aAAa,WAAY,KAAI,CAC7D,EACHK,GAAAA,MAAAA,EAAWI,OACb,CACF,CAAA,EAzB4B,yBA4BxBC,EAAUC,EAAW,CACzB,mBAAoB,GACpB,CAAE,qBAAoBC,EAAShC,GAAQiC,MAAkB,CAAC,CAACjC,CAAAA,CAC5D,EAED,SACE,MAAA,CAAK,UAAW8B,EAAS,UAAS/B,EAAI,UAAWc,EAAsB,SACpEZ,GAAAA,YAAAA,EAAOiC,IAAI,CAACC,EAAMzB,IAAU,CAC3B,MAAM0B,EAAW,CAAC,CAAClC,GAAcA,IAAeiC,EAAKX,GAC/CM,EAAUC,EAAW,CACzB,yBAA0B,GAC1B,YAAaK,CAAAA,CACd,EACD,SACE,SAAA,CAEE,GAAID,EAAKX,GACT,KAAK,MACL,UAAWM,EACX,aAAYK,EAAKE,UACjB,gBAAeD,EAAW,OAAS,QACnC,gBAAeD,EAAKG,aACpB,SAAUF,EAAW,EAAI,GACzB,QAASzB,EAAawB,EAAKX,EAAE,EAC7B,QAAS,IAAMhB,EAAYE,CAAK,CAAA,EAT3ByB,EAAKX,EAAE,CAAA,EAYjB,CACG,CAEV,CAjEgB1B,EAAAA,EAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}