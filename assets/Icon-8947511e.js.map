{"version":3,"file":"Icon-8947511e.js","sources":["../../../../packages/antwerp-ui/react-components/src/utils/file.utils.ts","../../../../packages/antwerp-ui/react-components/src/lib/base/icon/Icon.tsx"],"sourcesContent":["const MB = 1048576;\n\nexport function hasValidFormat(file: File, acceptedFormat = ''): boolean {\n  const acceptedFormats = acceptedFormat\n    .split(',')\n    .map((format) => format.trim())\n    .flatMap((format) => format.split('.'));\n\n  return acceptedFormats.some(\n    (format) =>\n      !format ||\n      format === '*' ||\n      format === file.type ||\n      (format.includes('*') && !!format.split('/')?.[0] && file.type.startsWith(format.split('/')?.[0]))\n  );\n}\n\nexport function hasValidSize(file: File, maxSize?: number): boolean {\n  return !maxSize || file.size <= maxSize * MB;\n}\n\nexport function areFilesValid(\n  files: File[],\n  acceptedFormat?: string,\n  maxSize?: number\n): { validSize: boolean; validFormat: boolean }[] {\n  return files.map((f) => ({ validFormat: hasValidFormat(f, acceptedFormat), validSize: hasValidSize(f, maxSize) }));\n}\n\nexport function invalidIcon(icon: SVGGraphicsElement): boolean {\n  const { width, height } = icon.getBBox();\n  return width === 0 && height === 0;\n}\n","import { IconProps } from './Icon.types';\nimport { ICONS_URL, SCREEN_READER_CLASS } from '../../../constants/settings';\nimport { classNames } from '../../../utils/dom.utils';\nimport { invalidIcon } from '../../../utils/file.utils';\nimport { logWarning } from '../../../utils/log.utils';\nimport { ForwardedRef, forwardRef } from 'react';\n\nconst ICONS_SVG_HTML_ID = 'ai-svg';\n\nexport const Icon = forwardRef(function Icon(\n  { name, tabIndex, onKeyDown, className, role, onClick, screenReaderText, thin, qa }: IconProps,\n  iconRef: ForwardedRef<HTMLSpanElement>\n) {\n  const fetchIcons = async function () {\n    if (typeof fetch !== 'function') return null;\n    const response = await fetch(ICONS_URL);\n    const svgText = await response.text();\n    const svgWrapper = document.createElement('svg');\n    svgWrapper.id = ICONS_SVG_HTML_ID;\n    svgWrapper.innerHTML = svgText;\n    if (!document.getElementById(ICONS_SVG_HTML_ID)) {\n      document.body.appendChild(svgWrapper);\n    }\n    queryIcons()?.forEach((icon) => {\n      if (invalidIcon(icon)) {\n        logWarning(\n          `The provided icon with name \"${name}\" does not seem to exist. Please make sure the 'name' is correct`\n        );\n      }\n    });\n  };\n\n  const queryIcons = () => {\n    return Array.from(document.querySelectorAll(`.ai-${name.replace('ai-', '')} use`)) as SVGGraphicsElement[];\n  };\n\n  if (typeof document !== 'undefined' && !document.getElementById(ICONS_SVG_HTML_ID)) {\n    fetchIcons();\n  }\n\n  const classes = classNames({\n    ai: true,\n    [`ai-${name?.replace('ai-', '')}`]: !!name,\n    'ai--thin': !!thin,\n    [className || '']: !!className\n  });\n\n  return (\n    <span\n      ref={iconRef}\n      onKeyDown={onKeyDown}\n      tabIndex={tabIndex}\n      role={role}\n      onClick={onClick}\n      className={classes}\n      data-qa={qa}\n    >\n      {name ? (\n        <svg aria-hidden=\"true\">\n          <use href={`#ai-${name.replace('ai-', '')}`} />\n        </svg>\n      ) : null}\n      {!!screenReaderText && <span className={SCREEN_READER_CLASS}>{screenReaderText}</span>}\n    </span>\n  );\n});\n"],"names":["MB","hasValidFormat","file","acceptedFormat","format","_a","_b","hasValidSize","maxSize","areFilesValid","files","f","invalidIcon","icon","width","height","ICONS_SVG_HTML_ID","Icon","forwardRef","name","tabIndex","onKeyDown","className","role","onClick","screenReaderText","thin","qa","iconRef","fetchIcons","svgText","ICONS_URL","svgWrapper","queryIcons","logWarning","classes","classNames","jsxs","jsx","SCREEN_READER_CLASS"],"mappings":"uOAAA,MAAMA,EAAK,QAEK,SAAAC,EAAeC,EAAYC,EAAiB,GAAa,CAMvE,OALwBA,EACrB,MAAM,GAAG,EACT,IAAKC,GAAWA,EAAO,KAAM,CAAA,EAC7B,QAASA,GAAWA,EAAO,MAAM,GAAG,CAAC,EAEjB,KACpBA,GACC,SAAA,OAACA,GACDA,IAAW,KACXA,IAAWF,EAAK,MACfE,EAAO,SAAS,GAAG,GAAK,CAAC,GAACC,EAAAD,EAAO,MAAM,GAAG,IAAhB,MAAAC,EAAoB,KAAMH,EAAK,KAAK,YAAWI,EAAAF,EAAO,MAAM,GAAG,IAAhB,YAAAE,EAAoB,EAAE,EAAA,CAEtG,CAEgB,SAAAC,EAAaL,EAAYM,EAA2B,CAClE,MAAO,CAACA,GAAWN,EAAK,MAAQM,EAAUR,CAC5C,CAEgB,SAAAS,EACdC,EACAP,EACAK,EACgD,CAChD,OAAOE,EAAM,IAAKC,IAAO,CAAE,YAAaV,EAAeU,EAAGR,CAAc,EAAG,UAAWI,EAAaI,EAAGH,CAAO,CAAI,EAAA,CACnH,CAEO,SAASI,EAAYC,EAAmC,CAC7D,KAAM,CAAE,MAAAC,EAAO,OAAAC,CAAO,EAAIF,EAAK,QAAQ,EAChC,OAAAC,IAAU,GAAKC,IAAW,CACnC,CCzBA,MAAMC,EAAoB,SAEbC,EAAOC,EAAA,WAAW,SAC7B,CAAE,KAAAC,EAAM,SAAAC,EAAU,UAAAC,EAAW,UAAAC,EAAW,KAAAC,EAAM,QAAAC,EAAS,iBAAAC,EAAkB,KAAAC,EAAM,GAAAC,CAAA,EAC/EC,EACA,CACA,MAAMC,EAAa,gBAAkB,OACnC,GAAI,OAAO,OAAU,WAAmB,OAAA,KAElC,MAAAC,EAAU,MADC,MAAM,MAAMC,CAAS,GACP,OACzBC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,GAAKhB,EAChBgB,EAAW,UAAYF,EAClB,SAAS,eAAed,CAAiB,GACnC,SAAA,KAAK,YAAYgB,CAAU,GAE3B3B,EAAA4B,EAAA,IAAA,MAAA5B,EAAG,QAASQ,GAAS,CAC1BD,EAAYC,CAAI,GAClBqB,EACE,gCAAgCf,CAAI,kEAAA,CAExC,EACD,EAGGc,EAAa,IACV,MAAM,KAAK,SAAS,iBAAiB,OAAOd,EAAK,QAAQ,MAAO,EAAE,CAAC,MAAM,CAAC,EAG/E,OAAO,SAAa,KAAe,CAAC,SAAS,eAAeH,CAAiB,GACpEa,IAGb,MAAMM,EAAUC,EAAW,CACzB,GAAI,GACJ,CAAC,MAAMjB,GAAA,YAAAA,EAAM,QAAQ,MAAO,GAAG,EAAE,EAAG,CAAC,CAACA,EACtC,WAAY,CAAC,CAACO,EACd,CAACJ,GAAa,EAAE,EAAG,CAAC,CAACA,CAAA,CACtB,EAGC,OAAAe,EAAC,OAAA,CACC,IAAKT,EACL,UAAAP,EACA,SAAAD,EACA,KAAAG,EACA,QAAAC,EACA,UAAWW,EACX,UAASR,EAER,SAAA,CAAAR,EACEmB,EAAA,MAAA,CAAI,cAAY,OACf,WAAC,MAAI,CAAA,KAAM,OAAOnB,EAAK,QAAQ,MAAO,EAAE,CAAC,EAAA,CAAI,CAC/C,CAAA,EACE,KACH,CAAC,CAACM,KAAqB,OAAK,CAAA,UAAWc,EAAsB,SAAiBd,EAAA,CAAA,CAAA,CAAA,CAGrF,CAAC"}